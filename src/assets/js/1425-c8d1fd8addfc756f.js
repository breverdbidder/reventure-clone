"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1425],{21425:function(e,t,o){o.d(t,{GF:function(){return GeoSearchProvider},ZP:function(){return hooks_useGeoSearch}});var l=o(35944),a={src:"/_next/static/media/current-location.8cab9e1b.svg",height:24,width:24,blurWidth:0,blurHeight:0},r=o(17347),n=o(33848),i=o(54017),u=o(54801),c=o(22755),s=o(98900),d=o(65884),f=o(63050),p=o(49672),v=o(198),h=o(23279),m=o.n(h),y=o(41609),g=o.n(y),S=o(3674),O=o.n(S),b=o(44304),C=o(99893),E=o(67294),x=o(91444),M=o(90584),T=o(11428),P=o(85302),N=o(11357),A=o(11163),I=o(25675),_=o.n(I),B=o(88565),R=o(95568),L=o(98417),Z=o(53576);let[F,w]=[-99,40],G=(0,E.createContext)(null),GeoSearchProvider=e=>{let{children:t}=e,o=(0,n.v)(),{setProgressQuery:h}=(0,N.Z)(),[y,S]=(0,M.Z)("geo",P.lo.METRO,{raw:!0}),[I,W]=(0,M.Z)("lastVisitedArea",null),D=y&&Object.values(P.lo).includes(y)?y:P.lo.METRO,[U,j]=(0,E.useState)(D),k=u.Ox[U]?u.Ox[U].defaultZoom:4,[Y,z]=(0,E.useState)(w),[H,X]=(0,E.useState)(F),[q,Q]=(0,E.useState)((null==I?void 0:I.zoom)?null==I?void 0:I.zoom:k),[V,J]=(0,E.useState)([]),[K,$]=(0,E.useState)([]),[ee,et]=(0,E.useState)([]);console.log(ee);let[eo,el]=(0,E.useState)("All States"),[ea,er]=(0,E.useState)(d.L.filter(e=>!e.label.includes(", PR"))),[en,ei]=(0,E.useState)(""),[eu,ec]=(0,E.useState)(""),[es,ed]=(0,E.useState)({}),ef=(0,A.useRouter)(),[ep,ev]=(0,E.useState)(""),[eh,em]=(0,E.useState)([]),[ey,eg]=(0,E.useState)(null),[eS,eO]=(0,E.useState)(null),[eb,eC]=(0,E.useState)(""),[eE,ex]=(0,E.useState)(!1),[eM,eT]=(0,E.useState)(!1),[eP,eN]=(0,E.useState)(null);(0,E.useEffect)(()=>{S(U),U!==P.lo.ZIP?Q(4):K.length||(null==I||I.geo,P.lo.ZIP)},[U]),(0,E.useEffect)(()=>{var e;let t=U===P.lo.ZIP&&!ee.length&&!K.length;ex(U===P.lo.ZIP);let o=ef.isReady&&(null===(e=ef.query)||void 0===e?void 0:e["graph-view"])!=="true";eT(t&&o)},[U,K,ee]),(0,E.useEffect)(()=>{U===P.lo.ZIP&&K.length?W({lat:Y,long:H,geo:U,filteredMetros:K,filteredStates:V,zoom:q}):U!==P.lo.ZIP&&W(null)},[U,K,q]);let getPlaceDetails=e=>{var t,o;let l=e.context,a=e.place_type.includes(P.fx.ZIP)?e.text:null,r=null===(t=l.find(e=>e.id.includes("district")))||void 0===t?void 0:t.text,n=null===(o=l.find(e=>e.id.includes("region")))||void 0===o?void 0:o.text,i={...a?{zip:a}:{},...r?{county:r}:{},state:n};return i},searchByFeature=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2?arguments[2]:void 0;try{var a,r,n,d;(0,b.B)("map-control-".concat(U),{category:"Map Control",label:U});let[f]=e.place_type,m=(null==t?void 0:t.forceGeo)?null==t?void 0:t.forceGeo:P.fj[f],y=t.searchedFrom||P.G8.MAP,g=getPlaceDetails(e),S={geo:Object.keys(g).includes(P.lo.ZIP)?P.lo.ZIP:P.fj[f],searchedFrom:y,place:e.place_name,...g,activeState:(0,B.ht)(null==o?void 0:o.activeState),platform:"Web",isUserPremium:null==o?void 0:o.isPremiumOrBasic,plan:null!==(d=o.plan)&&void 0!==d?d:R.k9.Free,loggedIn:!!o.email,userOrganizationStatus:(0,L.Jl)({user:o}),...o.email?{distinct_id:o.email,email:o.email}:{}};C.LJ.capture("Search",S),(0,Z.i0)(S);let E=m||U;if(!t.onlyFly){if(f===P.fx.STATE){E=P.lo.STATE;let t=p.a.find(t=>t.label.startsWith(e.text));J([t]),et([]),$(ea.filter(e=>+e["FIPS State Code"]==+t.value)||[])}else if(f===P.fx.COUNTY){E=P.lo.COUNTY;let t=(0,i.wc)(e),o=(0,i.B2)(e),l=p.a.find(e=>e.label===t),a=c.S.find(e=>e.label==="".concat(o,", ").concat(t));J([l]),$([]),et([a])}else if(f===P.fx.CITY){E=P.lo.ZIP;let t=(0,i.dX)(e,ea),o=(0,i.wc)(e),l=p.a.find(e=>e.label.toLowerCase()===o.toLowerCase()),a=(0,i.B2)(e),r=c.S.find(e=>e.label==="".concat(a,", ").concat(o));if(et(r?[r]:[]),J(l?[l]:[]),$(t?[t]:[]),!r&&!t){(0,x.Am)("Oops, This area is not available yet...",{position:x.Am.POSITION.BOTTOM_RIGHT,autoClose:5e3,closeOnClick:!0});return}}else if(f===P.fx.ZIP){E=P.lo.ZIP;let t=ea.find(t=>+t.value==+v.G[e.text]);if(t||(t=(0,i.dX)(e,ea)),!t){let o=v.G[+e.text];t=ea.find(e=>e.value==o)}if(!t){let t=O()(s.H).find(t=>!!s.H[t].find(t=>t.toString()===e.text)),o=c.S.filter(e=>e.label===t);if(!o){(0,x.Am)("Oops, This area is not available yet...",{position:x.Am.POSITION.BOTTOM_RIGHT,autoClose:5e3,closeOnClick:!0});return}et(o)}let o=(0,i.wc)(e),l=p.a.find(e=>e.label.toLowerCase()===o.toLowerCase());J(l?[l]:[]),$(t?[t]:[])}}let M=+((null==t?void 0:null===(a=t.forceLatLng)||void 0===a?void 0:a.lng)||e.geometry.coordinates[0]),T=+((null==t?void 0:null===(r=t.forceLatLng)||void 0===r?void 0:r.lat)||e.geometry.coordinates[1]),N=(null==t?void 0:t.forceZoom)?null==t?void 0:t.forceZoom:null===(n=u.Ox[(null==t?void 0:t.forceGeo)||E])||void 0===n?void 0:n.defaultZoom;ex(!1),l||ev(e.text),eg(e),Q(N),X(M),z(T),ed({long:M,lat:T,zoom:N}),t.onlyFly||(j((null==t?void 0:t.forceGeo)||E),eC(E));let A=null==e?void 0:e.place_name;h(e=>({...e,query:A,lnglat:JSON.stringify({lat:T,lng:M})}))}catch(e){}},handleInputChange=async e=>{ev(e),eI(e)},moveToDefaultMetro=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null==o?void 0:o.defaultMetro;if(!e)return;let t=f.K.find(t=>+e.value==+(null==t?void 0:t["CBSA Code"])),l=null==t?void 0:t["CBSA Full Title"].split(",")[0].replaceAll("-"," ").concat(", ".concat(null==t?void 0:t["State Name"])),a=await (0,T.wc)(l,{country:"us",types:"region,district,place,postcode"});if(a&&a.features.length){var r,n;let[t]=a.features,[o,l]=t.geometry.coordinates,i=p.a.find(t=>+t.value==+e["FIPS State Code"]);ev(""),eg(t),eO(t),J([i]),$([e]),j(P.lo.METRO),X(o),z(l),Q(null===(r=u.Ox[P.lo.METRO])||void 0===r?void 0:r.defaultZoom),ed({long:o,lat:l,zoom:null===(n=u.Ox[P.lo.METRO])||void 0===n?void 0:n.defaultZoom})}},searchByQuery=async(e,t,o)=>{var l;if("current-location"===e){await searchFromCurrentLocation();return}let a=await (0,T.wc)(e,{country:"us",types:"region,district,place,postcode"});if(null==a?void 0:null===(l=a.features)||void 0===l?void 0:l.length){let[e]=a.features;o||ev(e.text),searchByFeature(e,t,o),em(a.features.map(e=>createSuggestionObject(e)))}},searchByLatLng=async(e,t)=>{let o=await (0,T.vl)(e.lat,e.lng,{country:"us",types:"region,district,place,postcode"});if(o){let e=o.features.find(e=>e.place_type.includes(P.fx[U.toUpperCase()]));e&&(ev(e.text),searchByFeature(e,t),em(o.features.map(e=>createSuggestionObject(e))))}},createSuggestionObject=e=>({label:(0,l.BX)("span",{children:[e.text," ",(0,l.tZ)("span",{css:{fontSize:13,color:"#808080"},children:e.place_name})]}),value:e.id,feature:e,onClick:t=>searchByFeature(e,{onlyFly:t})}),searchFromCurrentLocation=async()=>{var e;let _onLocationGranted=()=>{var e;null===(e=navigator.geolocation)||void 0===e||e.getCurrentPosition(async e=>{var t;let{coords:o}=e,{latitude:l,longitude:a}=o,r=await (0,T.vl)(l.toString(),a.toString(),{country:"us",types:"postcode"});if(null==r?void 0:null===(t=r.features)||void 0===t?void 0:t.length){let e=r.features[0];ev(e.text);let t=r.features.map(e=>createSuggestionObject(e));em(t),t.length&&t[0].onClick(!1)}},e=>{console.error(e)})};if(null===(e=navigator.permissions)||void 0===e?void 0:e.query){let e=await navigator.permissions.query({name:"geolocation"}),t=e.state;["granted","prompt"].includes(t)&&_onLocationGranted()}else navigator.geolocation&&_onLocationGranted()},eA={label:(0,l.BX)(r.k,{children:[(0,l.tZ)(_(),{alt:"CurrentLocation",src:a,css:{width:17,height:17,marginTop:2}}),(0,l.tZ)("span",{css:{marginLeft:6},children:"Use my current location"})]}),value:"current-location",onClick:()=>searchFromCurrentLocation()},eI=(0,E.useCallback)(m()(async e=>{if(e.length){let t=await (0,T.wc)(e,{country:"us",types:"region,district,place,postcode"});em(((null==t?void 0:t.features)||[]).map(e=>createSuggestionObject(e)))}else em([])},500),[]);return(0,l.tZ)(G.Provider,{value:{lat:Y,long:H,zoom:q,filteredStates:V,searchId:es,geo:U,stateList:p.a,metroFilter:ea,countyList:c.S,filteredMetros:K,filteredCounties:ee,searchedGeo:eb,showFocusToolTip:eM,focusSearch:eE,selectedFeature:ey,defaultMetroFeature:eS,searchValue:ep,suggestions:eh,currentLocationSuggestion:eA,graphContext:eP,searchZipsViaState:eo,filterYear:en,filterMonth:eu,lastVisitedArea:I,setGraphContext:eN,setGeo:j,setFilteredStates:J,setFilteredMetros:$,setFilteredCounties:et,setLat:z,setLong:X,setZoom:Q,setSearchId:ed,reset:()=>{var e;ev(""),em([]),$([]),J([]),eO(null),eg(null),j(P.lo.METRO),eC(""),ec(""),ei("");let t={long:F,lat:w,zoom:null===(e=u.Ox[P.lo.METRO])||void 0===e?void 0:e.defaultZoom};Q(t.zoom),X(t.long),z(t.lat),ed(t)},setSearchValue:ev,setSuggestions:em,handleInputChange,setSelectedFeature:eg,searchByFeature,setDefaultMetroFeature:eO,moveToDefaultMetro,searchByQuery,searchByLatLng,setSearchedGeo:eC,setShowFocusTooltip:eT,setFocusSearch:ex,setFromLastVisitedArea:function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if(!g()(I)){let{lat:t,long:o,geo:l,filteredMetros:a,filteredStates:r,zoom:n}=I;z(t),X(o),j(l),Q(n),eC(l),$(a),J(r),ed({lat:t,long:o,zoom:n,...e?{}:{duration:0}})}},setSearchZipsViaState:el,setFilterYear:ei,setFilterMonth:ec},children:t})};var hooks_useGeoSearch=()=>{let e=(0,E.useContext)(G);if(!e)throw Error("Cannot use GeoSearch outside of Provider");return e}},11357:function(e,t,o){o.d(t,{B:function(){return ProgressQueryProvider}});var l=o(35944),a=o(67294);let r=(0,a.createContext)(null),ProgressQueryProvider=e=>{let{children:t}=e,[o,n]=(0,a.useState)({});return(0,l.tZ)(r.Provider,{value:{progressQuery:o,setProgressQuery:n},children:t})};t.Z=()=>{let e=(0,a.useContext)(r);if(!e)throw Error("Cannot use ProgressQuery outside of its context");return e}},33020:function(e,t,o){o.d(t,{s4:function(){return filterOutliers},WC:function(){return isFilterExcludedFromGeo}});var l=o(85302);let a={[l.lo.STATE]:[{label:"state_code",value:"state_code"}],[l.lo.METRO]:[],[l.lo.COUNTY]:[],[l.lo.ZIP]:[{value:"state_code",label:"state_code"},{value:"percent_crash_great_recession",label:"% Crash from 2007-12"},{value:"rent_for_apartments",label:"Rental Rate"},{value:"rent_for_houses",label:"Rent For Houses"},{value:"buy_versus_rent_percentage",label:"Buy v Rent Differential"},{value:"cap_rate",label:"Cap Rate"},{value:"rent_percentage_of_income",label:"Rent as % of Income"}]};var r=o(84753),n=o.n(r),i=o(22762),u=o.n(i);let isFilterExcludedFromGeo=(e,t)=>{var o;return!(null===(o=a[t])||void 0===o?void 0:o.some(t=>e.label===t.label))},filterOutliers=(e,t,o)=>{var l,a;let r,i,c,s,d,f;let p=o[0],v=o[1];r=e.slice().sort((e,o)=>e[t]-o[t]).filter(e=>!!e[t]);let h=r.length/4,m=r.length*(3/4);if(r.length<4||r.length<=Math.floor(h+1)||r.length<=Math.ceil(m+1))return filterByPercentile(e,t,o);h%1==0?(i=.5*(r[h][t]+r[h+1][t]),c=.5*(r[m][t]+r[m+1][t])):(i=r[Math.floor(h+1)][t],c=r[Math.ceil(m+1)][t]),s=c-i,d=c+1.5*s,f=i-1.5*s;let y=d-f,g=p>0?p/100*y+f:(null===(l=u()(e,e=>e[t]))||void 0===l?void 0:l[t])||0,S=v<100?v/100*y+f:(null===(a=n()(e,e=>e[t]))||void 0===a?void 0:a[t])||0;return[g,S]},filterByPercentile=(e,t,o)=>{var l,a;let r=(null===(l=u()(e,e=>e[t]))||void 0===l?void 0:l[t])||0,i=(null===(a=n()(e,e=>e[t]))||void 0===a?void 0:a[t])||0,c=i-r;return[o[0]/100*c+r,o[1]/100*c+r]}},88565:function(e,t,o){o.d(t,{BF:function(){return getMetroNameByZip},dY:function(){return getMetroName},ht:function(){return getStateNameByCode},p7:function(){return getStateByGeocode},qs:function(){return getStateName},uf:function(){return getCountyName}});var l=o(69916),a=o(22755),r=o(63004),n=o(98900),i=o(63050),u=o(49672),c=o(95667),s=o(198),d=o(85302);let getCountyName=e=>{var t;let o=null===(t=a.S.find(t=>Number(t.value)===Number(l.sO[e])))||void 0===t?void 0:t.label;return o||Object.keys(n.H).find(t=>n.H[t].includes(Number(e)))},getMetroName=(e,t,o)=>{let l;if(t===d.lo.ZIP)l=i.K.find(t=>Number(t["CBSA Code"])===Number(s.G[e.GEOID]));else{let t=r.d.find(t=>t.fipscountycode===parseInt(e.geo_code)&&t.fipsstatecode===parseInt(e.state_code));if(!t)return"";l=i.K.find(e=>e["CBSA Code"]===t.cbsacode)}return((null==o?void 0:o.short)?null==l?void 0:l.CBSA:(null==o?void 0:o.solo)?null==l?void 0:l["CBSA Solo"]:null==l?void 0:l["CBSA Full Title"])||""},getMetroNameByZip=e=>{let t=i.K.find(t=>Number(t["CBSA Code"])===Number(s.G[e]));return null==t?void 0:t.CBSA},getStateName=(e,t)=>{let o=u.a.find(t=>+t.value==+e.state);return((null==t?void 0:t.short)?null==o?void 0:o.abbreviation:null==o?void 0:o.label)||""},getStateNameByCode=e=>{if(!e)return null;let t=u.a.find(t=>+t.value==+e);return(null==t?void 0:t.label)||null},getStateByGeocode=(e,t)=>{var o,l,r;let n=+e;switch(t){case d.lo.STATE:return(null===(o=u.a.find(e=>+e.value===n))||void 0===o?void 0:o.value)||null;case d.lo.METRO:return(null===(l=i.K.find(e=>e["CBSA Code"]===n))||void 0===l?void 0:l["FIPS State Code"])||null;case d.lo.COUNTY:return(null===(r=a.S.find(t=>t.value===e))||void 0===r?void 0:r.stateCode)||null;case d.lo.ZIP:return c.Z[n.toString()]||null;default:return null}}},85978:function(e,t,o){o.d(t,{Ip:function(){return findFillLayer},Su:function(){return getGeoCodeFromFeature},eS:function(){return generateIntervalMap},jF:function(){return generateHistoricColorSteps},jh:function(){return generateMapStep},pI:function(){return getColorScale},y8:function(){return quantileMaker}});var l=o(80457),a=o(84753),r=o.n(a),n=o(22762),i=o.n(n),u=o(52628),c=o.n(u),s=o(4788),d=o.n(s),f=o(85302),p=o(28757),v=o(33020);let getColorScale=function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t==p.tF.VOTING_DEMOCRAT_PERCENTAGE?l.Z.map.colorRangeReverse:l.Z.map.colorRange,a=r()(e,e=>e[t]),n=a&&a[t]||0,u=i()(e,e=>e[t]),c=u&&u[t]||0;return t===p.dG.HOME_PRICE_MOMENTUM_SCORE&&(n=(a=r()(e,e=>e[p.tF.HOME_PRICE_MOMENTUM_SCORE_PERCENTAGE]))&&a[p.tF.HOME_PRICE_MOMENTUM_SCORE_PERCENTAGE]||0,c=(u=i()(e,e=>e[p.tF.HOME_PRICE_MOMENTUM_SCORE_PERCENTAGE]))&&u[p.tF.HOME_PRICE_MOMENTUM_SCORE_PERCENTAGE]||0),quantileMaker(o.length,c,n,o)},quantileMaker=function(e,t,o,l){let a=o-t,r=a/e,n=Array.from({length:e},()=>0).map(function(e,l,a){return a.length-1===l?o:0===l?t:this.acc+=r},{acc:t});return d()(n,l)},generateIntervalMap=e=>{let t={};return[.15,.3,.45,.6,.75,.9].forEach((o,l)=>{let a=percentileMaker(e,o);for(let[e,o]of Object.entries(t))if(o===a){let e=Math.floor(899999*Math.random()+1e5),t=Number(.01+String(e));a+=t}t[l]=a}),t},percentileMaker=(e,t)=>{let o=e.sort((e,t)=>e-t),l=(o.length-1)*t,a=Math.floor(l);return void 0!==o[a+1]?o[a]+(l-a)*(o[a+1]-o[a]):o[a]},generateMapStep=(e,t)=>{let o=[];return c()(e).sort((e,t)=>e-t).forEach((e,l)=>{o.push(t[l]),o.push(e)}),o.push(t[t.length-1]),o},generateHistoricColorSteps=function(e,t,o){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,[a,r]=(0,v.s4)(e,t,[10,90]),n=returnAllSteps(a,l,o),i=returnAllSteps(l,r,o);return[...n.slice(0,o-1),...i]},findFillLayer=(e,t)=>e.find(e=>e.layer.id===t);function returnAllSteps(e,t,o){let l=[],a=t-e;for(let t=0;t<o;t++)l[t]=e+a*(t/(o-1));return l}let getGeoCodeFromFeature=(e,t)=>t===f.lo.NATIONAL?"US":e.geo_code||(t===f.lo.COUNTY?"".concat(e.GEOID).padStart(5,"0").substring(2):e.GEOID)},54801:function(e,t,o){o.d(t,{CY:function(){return featureMeetsCriteriaState},NA:function(){return clearPreviousFeaturesByLayer},NO:function(){return repaintMap},Ox:function(){return h},UF:function(){return createGeoId},Wn:function(){return repaintHistoricMap},xb:function(){return getLayers}});var l=o(84753),a=o.n(l),r=o(22762),n=o.n(r),i=o(57557),u=o.n(i),c=o(85302),s=o(52905),d=o(28757),f=o(32696),p=o(85978);let v="https://tile.reventure.app",h={state:{minZoom:4,maxZoom:6,defaultZoom:4,fillOpacity:.45,lineWidth:[6,3.2],lineWidthBold:6,lineWidthSemiBold:4.7,lineWidthDefault:3.2,stateOutlineWidth:3.5,stateOutlineOpacity:.5,source:"".concat(v,"/tiles-state/{z}/{y}/{x}.pbf"),sharedLabelLayoutProperties:{"text-font":["DIN Offc Pro Bold","Arial Unicode MS Regular"],"symbol-placement":"point","icon-ignore-placement":!0,"icon-allow-overlap":!0,"text-allow-overlap":!0,"text-size":16,"text-justify":"auto","text-anchor":"bottom"}},metro:{minZoom:4,maxZoom:9,defaultZoom:6,fillOpacity:.3,lineWidth:[6,1.5],lineWidthBold:6,lineWidthSemiBold:3,lineWidthDefault:1.5,stateOutlineWidth:3.5,stateOutlineOpacity:.5,source:"".concat(v,"/tiles-metro/{z}/{y}/{x}.pbf"),sharedLabelLayoutProperties:{"text-font":["DIN Offc Pro Bold","Arial Unicode MS Regular"],"symbol-placement":"point","icon-ignore-placement":!0,"icon-allow-overlap":!0,"text-allow-overlap":!0,"text-ignore-placement":!0,"text-size":["interpolate",["linear"],["zoom"],5,12,7,14,10,16],"text-justify":"auto","text-anchor":"bottom"}},county:{minZoom:4,maxZoom:11,defaultZoom:9,fillOpacity:.3,lineWidth:[6,1.5],lineWidthBold:6,lineWidthSemiBold:3,lineWidthDefault:1.5,stateOutlineWidth:3.5,stateOutlineOpacity:.5,source:"".concat(v,"/tiles-county/{z}/{y}/{x}.pbf"),sharedLabelLayoutProperties:{"text-font":["DIN Offc Pro Bold","Arial Unicode MS Regular"],"symbol-placement":"point","text-size":["interpolate",["linear"],["zoom"],5,12,7,14,10,16],"text-justify":"auto","text-anchor":"bottom","icon-ignore-placement":!0,"icon-allow-overlap":!0,"text-allow-overlap":!0,"text-ignore-placement":!0}},zip:{minZoom:2,maxZoom:15,defaultZoom:12,fillOpacity:.21,lineWidth:[3,1.25],lineWidthBold:3,lineWidthSemiBold:2,lineWidthDefault:1,stateOutlineWidth:1.5,stateOutlineOpacity:.5,source:"".concat(v,"/tiles-zip/{z}/{y}/{x}.pbf"),sharedLabelLayoutProperties:{"text-font":["DIN Offc Pro Bold","Arial Unicode MS Regular"],"text-size":["interpolate",["linear"],["zoom"],5,13,17,16],"symbol-placement":"point","icon-ignore-placement":!0,"icon-allow-overlap":!0,"text-allow-overlap":!0,"text-ignore-placement":!0,"text-justify":"auto","text-anchor":"bottom"}},national:{minZoom:2,maxZoom:6,defaultZoom:4,fillOpacity:.45,lineWidth:[8,4],lineWidthBold:8,lineWidthSemiBold:6,lineWidthDefault:4,stateOutlineWidth:2,stateOutlineOpacity:.7,source:"".concat(v,"/tiles-national/{z}/{y}/{x}.pbf"),sharedLabelLayoutProperties:{"text-font":["DIN Offc Pro Bold","Arial Unicode MS Regular"],"symbol-placement":"point","icon-ignore-placement":!0,"icon-allow-overlap":!0,"text-allow-overlap":!0,"text-size":20,"text-justify":"auto","text-anchor":"center"}}},getLayers=e=>{let{geoLayerPrefix:t,sourceName:o,geo:l,exploratory:a,scale:r,matchExpression:n,theme:i}=e,d={};if(d[t]=[{id:"".concat(t,"-fill"),type:"fill",source:t,"source-layer":"".concat(o),paint:{"fill-opacity":["case",["==",["feature-state","isInvalid"],!0],.08,["boolean",["feature-state","isFiltered"],!1],h[l].fillOpacity,0],"fill-color":{property:a,stops:r}}},{id:"".concat(t,"-line"),type:"line",source:t,"source-layer":"".concat(o),paint:{"line-opacity":l===c.lo.NATIONAL?0:["case",["==",["feature-state","isInvalid"],!0],.3,["boolean",["feature-state","isFiltered"],!1],.9,0],"line-width":["case",["all",["boolean",["feature-state","isHovered"],!1],["!",["boolean",["feature-state","isSearched"],!1]]],h[l].lineWidthSemiBold,["boolean",["feature-state","isSearched"],!1],h[l].lineWidthBold,["boolean",["feature-state","isHovered"],!1],h[l].lineWidthSemiBold,h[l].lineWidthDefault],"line-color":i.colors.navy}}],l===c.lo.NATIONAL)return d;let f={id:"exploratory-label",type:"symbol",source:l===c.lo.STATE?"states-shape":t,"source-layer":l===c.lo.STATE?void 0:"".concat(o,"/label"),layout:{"text-field":n,"text-offset":[0,1.3],...h[l].sharedLabelLayoutProperties},paint:{"text-opacity":["case",["boolean",["feature-state","isLabelHidden"],!1],0,.9],"text-color":i.colors.navy,"text-halo-color":i.colors.white,"text-halo-width":1}},p=l===c.lo.STATE?"states-shape":t;return d[p]?d[p].push({...l===c.lo.STATE?u()(f,"source-layer"):f}):d[p]=[{...l===c.lo.STATE?u()(f,"source-layer"):f}],l===c.lo.ZIP&&(d.metros||(d.metros=[]),d.metros.push({id:s.g[c.lo.METRO],type:"fill",source:s.Y[c.lo.METRO].source,"source-layer":s.Y[c.lo.METRO].sourceLayer,paint:{"fill-opacity":["case",["boolean",["feature-state","isFiltered"],!1],.15,0],"fill-color":i.colors.black}},{id:"metros-line",type:"line",source:s.Y[c.lo.METRO].source,"source-layer":s.Y[c.lo.METRO].sourceLayer,paint:{"line-opacity":["case",["boolean",["feature-state","isFiltered"],!1],.9,0],"line-width":["case",["boolean",["feature-state","isHovered"],!1],6,1],"line-color":i.colors.navy}},{id:"metros-labels",type:"symbol",source:"metros","source-layer":"CBSA/label",layout:{"text-font":["DIN Offc Pro Bold","Arial Unicode MS Regular"],"symbol-placement":"point","icon-ignore-placement":!0,"icon-allow-overlap":!0,"text-allow-overlap":!0,"text-ignore-placement":!0,"text-field":["get","BASENAME"],"text-size":14,"text-justify":"auto","text-anchor":"bottom"},paint:{"text-opacity":["case",["boolean",["feature-state","isFiltered"],!1],.9,0],"text-color":i.colors.navy,"text-halo-color":i.colors.white,"text-halo-width":1}})),[c.lo.COUNTY,c.lo.METRO,c.lo.ZIP].includes(l)&&(d.states=[],d.states.push({id:"states-fill",type:"fill",source:"states","source-layer":"State",paint:{"fill-opacity":0}},{id:"states-line",type:"line",source:"states","source-layer":"State",paint:{"line-opacity":l===c.lo.COUNTY?.6:.7,"line-width":l===c.lo.COUNTY?4:2,"line-color":l===c.lo.COUNTY?"#000000":"#00212c"}})),d},repaintMap=e=>{let{map:t,geo:o,theme:l,setScale:r,exploratory:i,featureStates:u}=e;try{let e=u.filter(e=>e.isFiltered&&(0,f.EK)(e[i])).map(e=>e[i]);if((null==e?void 0:e.length)&&t){let u=a()(e,e=>e),c=n()(e,e=>e),f=(0,p.y8)(5,c,u,i==d.tF.VOTING_DEMOCRAT_PERCENTAGE?l.map.colorRangeReverse:l.map.colorRange);if(r(f),e.length){let a=(0,p.eS)(e),r=(0,p.jh)(a,i===d.tF.VOTING_DEMOCRAT_PERCENTAGE?l.map.paintPercentileColorRangeRevers:l.map.paintPercentileColorRange);t.setPaintProperty("".concat(s.Y[o].source,"-fill"),"fill-color",["step",["feature-state",i],...r])}}null==t||t.triggerRepaint()}catch(e){console.error("Error",e)}},repaintHistoricMap=e=>{let{map:t,geo:o,theme:l,setScale:a,exploratory:r,featureStates:n,midPoint:i}=e;try{let e=["case"],u=r===d.tF.VOTING_DEMOCRAT_PERCENTAGE?l.map.paintPercentileColorRangeRevers:l.map.paintPercentileColorRange,c=u.length;a((0,p.pI)(n,r,u));let f=n.filter(e=>!!e[r]),v=(0,p.jF)(f,r,Math.ceil(c/2),i);v.forEach((t,o)=>{o<Math.floor(c/2)?e.push(["<",["feature-state",r],v[o+1]],u[o]):o===Math.floor(c/2)?e.push(["==",["feature-state",r],v[o]],u[o]):o===c-1?e.push([">=",["feature-state",r],v[o-1]],u[o]):o>Math.floor(c/2)&&e.push(["<",["feature-state",r],v[o]],u[o])}),e.push(u[Math.ceil(c/2)]),t.setPaintProperty("".concat(s.Y[o].source,"-fill"),"fill-color",e),null==t||t.triggerRepaint()}catch(e){console.error("Error",e)}},featureMeetsCriteriaState=(e,t)=>{if("state_code"===e.label){var o;return null==e?void 0:null===(o=e.val)||void 0===o?void 0:o.includes(t)}if(!e.val.length)return!0;let[l,a]=e.val,r=Number(Number(t).toFixed(2)),n=Number(Number(l).toFixed(2)),i=Number(Number(a).toFixed(2));return r>=n&&r<=i},clearPreviousFeaturesByLayer=(e,t)=>{e.forEach(e=>{t.removeFeatureState({source:s.Y[e].source,sourceLayer:s.Y[e].sourceLayer})})};function createGeoId(e,t){return t===c.lo.COUNTY?e.state_code+e.geo_code:e.geo_code}},11428:function(e,t,o){o.d(t,{vl:function(){return getDataByLatLng},wc:function(){return getDataByPlace}});var l=o(64487);let createQuery=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o="";for(let e in t)o+="&".concat(e,"=").concat(t[e]);return"https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(e),".json?access_token=").concat("pk.eyJ1Ijoibmlja2cxMjMiLCJhIjoiY2xsbnNyNW1iMDNhNDNmcDY1NTZuMGV4ZiJ9.fwoXJu4LCqWB1NN3GhgAMg").concat(o)},getDataByLatLng=async function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{let l=await fetch(createQuery("".concat(t,",").concat(e),o),{next:{revalidate:604800}}),a=await l.json();return a}catch(e){console.error("[MAPBOX]",e),l.Tb(e,{tags:{keyword:"[MAPBOX]  Error: geocoding/v5/mapbox.places"}})}},getDataByPlace=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let o=await fetch(createQuery(e,t),{next:{revalidate:604800}}),l=await o.json();return l}catch(e){console.error("[MAPBOX]",e),l.Tb(e,{tags:{keyword:"[MAPBOX]  Error: geocoding/v5/mapbox.places"}})}}},52905:function(e,t,o){o.d(t,{Y:function(){return a},g:function(){return r}});var l=o(85302);let a={[l.lo.STATE]:{source:"states",sourceLayer:"State",nameProperty:"NAME"},[l.lo.METRO]:{source:"metros",sourceLayer:"CBSA",nameProperty:"GEOID"},[l.lo.COUNTY]:{source:"counties",sourceLayer:"County",nameProperty:"GEOID"},[l.lo.ZIP]:{source:"zips",sourceLayer:"ZCTA5",nameProperty:"GEOID"},[l.lo.NATIONAL]:{source:"national",sourceLayer:"State",nameProperty:"NAME"}},r={[l.lo.STATE]:"states-fill",[l.lo.METRO]:"metros-fill",[l.lo.COUNTY]:"counties-fill",[l.lo.ZIP]:"zips-fill",[l.lo.NATIONAL]:"national-fill"}}}]);
//# sourceMappingURL=1425-c8d1fd8addfc756f.js.map